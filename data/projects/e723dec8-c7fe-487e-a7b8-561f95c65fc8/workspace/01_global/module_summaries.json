[
  {
    "module_name": "账户系统",
    "purpose": "负责开立和标记天财专用账户，控制账户能力，为天财分账业务提供专用的行业钱包账户的创建、标识和管理功能。",
    "interfaces": [
      {
        "method": "POST",
        "path": "/api/v1/accounts/tiancai",
        "description": "开立天财专用账户"
      },
      {
        "method": "POST",
        "path": "/api/v1/accounts/{accountId}/tags",
        "description": "为账户添加标记"
      },
      {
        "method": "PUT",
        "path": "/api/v1/accounts/{accountId}/status",
        "description": "更新账户状态（如冻结/解冻）"
      },
      {
        "method": "GET",
        "path": "/api/v1/accounts/{accountId}",
        "description": "查询账户详情"
      }
    ],
    "database_tables": [
      {
        "name": "tiancai_account",
        "description": "存储天财专用账户核心信息"
      },
      {
        "name": "account_status_log",
        "description": "记录账户状态变更历史"
      }
    ],
    "dependencies": [
      "三代系统",
      "行业钱包系统",
      "清结算系统"
    ],
    "key_features": [
      "账户开立",
      "账户标记",
      "账户能力控制（状态管理）"
    ]
  },
  {
    "module_name": "认证系统",
    "purpose": "通过小额打款或人脸比对的方式，为关系绑定、开通付款等业务流程提供身份认证能力。",
    "interfaces": [
      {
        "method": "POST",
        "path": "/api/v1/auth/payment-verification",
        "description": "发起打款验证"
      },
      {
        "method": "POST",
        "path": "/api/v1/auth/payment-verification/confirm",
        "description": "确认打款验证"
      },
      {
        "method": "POST",
        "path": "/api/v1/auth/face-verification",
        "description": "发起人脸验证"
      }
    ],
    "database_tables": [
      {
        "name": "payment_verification_records",
        "description": "存储打款验证记录"
      },
      {
        "name": "face_verification_records",
        "description": "存储人脸验证记录"
      }
    ],
    "dependencies": [
      "电子签约平台",
      "行业钱包系统"
    ],
    "key_features": [
      "打款验证流程",
      "人脸验证流程"
    ]
  },
  {
    "module_name": "清结算系统",
    "purpose": "处理天财分账业务的结算账户配置、专用账户资金冻结、退货账户查询以及计费处理，是资金流转和结算控制的核心模块。",
    "interfaces": [
      {
        "method": "POST",
        "path": "/api/settlement/account/freeze",
        "description": "对指定的天财专用账户执行资金冻结或解冻操作。"
      },
      {
        "method": "GET",
        "path": "/api/refund/account",
        "description": "根据交易信息查询对应的原收款账户（天财收款账户）。"
      },
      {
        "method": "POST",
        "path": "/api/settlement/config/sync",
        "description": "接收并处理由三代系统同步的商户结算模式配置。"
      },
      {
        "method": "POST",
        "path": "/api/settlement/fee/sync",
        "description": "向计费中台同步涉及手续费的交易信息。"
      }
    ],
    "database_tables": [
      {
        "name": "settlement_config",
        "description": "存储商户的结算模式与账户映射。"
      },
      {
        "name": "account_freeze_record",
        "description": "记录天财专用账户的冻结/解冻操作流水。"
      },
      {
        "name": "refund_account_mapping",
        "description": "存储交易订单与原收款账户的映射关系。"
      }
    ],
    "dependencies": [
      "账户系统",
      "行业钱包系统",
      "三代系统",
      "计费中台"
    ],
    "key_features": [
      "结算账户配置",
      "退货账户查询",
      "专用账户冻结",
      "计费处理协同"
    ]
  },
  {
    "module_name": "计费中台",
    "purpose": "为天财分账业务提供统一的转账计费能力，执行计费计算与扣费。",
    "interfaces": [],
    "database_tables": [
      {
        "name": "fee_config",
        "description": "用于存储从三代系统同步的计费规则。"
      },
      {
        "name": "fee_record",
        "description": "用于记录每一笔交易产生的计费详情。"
      }
    ],
    "dependencies": [
      "三代系统",
      "行业钱包系统",
      "业务核心系统",
      "账户系统"
    ],
    "key_features": [
      "监听并同步三代系统的手续费配置",
      "根据业务规则计算交易手续费",
      "调用账户系统执行实际扣费"
    ]
  },
  {
    "module_name": "业务核心系统",
    "purpose": "接收并处理'天财分账'交易记录，作为天财分账业务的后端处理引擎，负责交易处理、资金路由和状态管理。",
    "interfaces": [
      {
        "method": "POST",
        "path": "/api/v1/transaction/process",
        "description": "处理天财分账交易请求"
      },
      {
        "method": "POST",
        "path": "/api/v1/transaction/query",
        "description": "查询交易处理状态"
      }
    ],
    "database_tables": [
      {
        "name": "transaction_record",
        "description": "持久化每一笔分账交易的核心信息与状态"
      },
      {
        "name": "transaction_step_log",
        "description": "记录交易处理过程中的关键步骤与调用下游系统的结果"
      }
    ],
    "dependencies": [
      "行业钱包系统",
      "清结算系统",
      "计费中台",
      "对账单系统"
    ],
    "key_features": [
      "交易接收与幂等校验",
      "交易处理与路由（含手续费计算与资金划转）",
      "状态同步与更新",
      "日切处理",
      "交易冲正"
    ]
  },
  {
    "module_name": "钱包app/商服平台",
    "purpose": "作为面向商户的前端应用与服务平台，提供天财分账业务的发起、管理、查询及关系绑定等核心功能，是行业钱包系统与商户的交互界面。",
    "interfaces": [],
    "database_tables": [],
    "dependencies": [
      "行业钱包系统",
      "电子签约平台",
      "认证系统"
    ],
    "key_features": [
      "关系绑定流程引导与认证",
      "资金归集发起与管理",
      "批量付款/会员结算发起与管理"
    ]
  },
  {
    "module_name": "三代系统",
    "purpose": "负责商户管理、开户接口调用、结算模式配置、分账关系绑定接口提供，是连接业务前端与底层账户、钱包系统的关键枢纽。",
    "interfaces": [
      {
        "method": "POST",
        "path": "/api/v1/merchants/{merchantId}/tiancai-accounts",
        "description": "为指定商户开立天财专用账户"
      },
      {
        "method": "POST",
        "path": "/api/v1/merchants/{merchantId}/settlement-mode",
        "description": "配置商户的结算模式（主动结算/被动结算）"
      },
      {
        "method": "POST",
        "path": "/api/v1/relationship/bind",
        "description": "建立分账关系绑定（签约与认证）"
      },
      {
        "method": "GET",
        "path": "/api/v1/merchants/{merchantId}/relationship",
        "description": "查询商户的绑定关系"
      },
      {
        "method": "POST",
        "path": "/api/v1/batch-payment",
        "description": "发起批量付款指令"
      },
      {
        "method": "POST",
        "path": "/api/v1/member-settlement",
        "description": "发起会员结算指令"
      },
      {
        "method": "POST",
        "path": "/api/v1/collection",
        "description": "发起归集指令"
      }
    ],
    "database_tables": [
      {
        "name": "merchant",
        "description": "存储商户核心信息"
      },
      {
        "name": "merchant_tiancai_account",
        "description": "存储商户与天财专用账户的关联关系"
      },
      {
        "name": "settlement_config",
        "description": "存储商户的结算模式配置"
      },
      {
        "name": "relationship_binding",
        "description": "存储分账关系绑定记录"
      },
      {
        "name": "payment_order",
        "description": "存储发起的付款指令（批量付款、会员结算、归集）"
      }
    ],
    "dependencies": [
      "账户系统",
      "行业钱包系统",
      "电子签约平台",
      "认证系统",
      "计费中台",
      "业务核心系统",
      "清结算系统"
    ],
    "key_features": [
      "商户天财账户开立",
      "结算模式配置",
      "分账关系绑定（签约与认证）",
      "付款指令发起",
      "手续费配置同步"
    ]
  },
  {
    "module_name": "电子签约平台",
    "purpose": "为天财分账业务中的关系绑定、开通付款等流程提供电子签约与身份认证的集成服务，确保业务流程合规且证据可追溯。",
    "interfaces": [
      {
        "method": "POST",
        "path": "/api/v1/esign/contract/generate",
        "description": "生成签约协议并初始化流程"
      },
      {
        "method": "POST",
        "path": "/api/v1/esign/contract/sign",
        "description": "提交签约确认"
      },
      {
        "method": "POST",
        "path": "/api/v1/esign/verification/initiate",
        "description": "发起身份验证流程"
      },
      {
        "method": "POST",
        "path": "/api/v1/esign/verification/callback",
        "description": "接收认证结果回调"
      },
      {
        "method": "GET",
        "path": "/api/v1/esign/contract/{contractId}",
        "description": "查询协议状态与详情"
      }
    ],
    "database_tables": [
      {
        "name": "contract_templates",
        "description": "存储协议模板"
      },
      {
        "name": "contracts",
        "description": "存储生成的协议实例"
      },
      {
        "name": "signing_records",
        "description": "存储签约记录"
      },
      {
        "name": "verification_records",
        "description": "存储与协议关联的验证记录"
      },
      {
        "name": "evidence_chain",
        "description": "存储协议与验证过程的证据链"
      }
    ],
    "dependencies": [
      "认证系统",
      "短信服务",
      "行业钱包系统",
      "三代系统"
    ],
    "key_features": [
      "协议模板管理、生成与签约流程",
      "集成身份验证流程（打款/人脸）",
      "H5页面封装与短信推送",
      "留存协议和认证过程证据链"
    ]
  },
  {
    "module_name": "行业钱包系统",
    "purpose": "负责天财专用账户管理、关系绑定校验、分账请求处理及与各系统交互",
    "interfaces": [
      {
        "method": "POST",
        "path": "/api/v1/wallet/relationship/bind",
        "description": "接收并处理分账关系绑定请求"
      },
      {
        "method": "POST",
        "path": "/api/v1/wallet/transfer",
        "description": "接收并处理分账转账请求（归集、批量付款、会员结算）"
      },
      {
        "method": "GET",
        "path": "/api/v1/wallet/accounts/{walletAccountNo}",
        "description": "查询天财专用账户详情及状态"
      },
      {
        "method": "POST",
        "path": "/api/v1/wallet/accounts/{walletAccountNo}/withdraw-cards",
        "description": "绑定或设置默认提现卡（用于天财接收方账户）"
      },
      {
        "method": "PUT",
        "path": "/api/v1/wallet/accounts/{walletAccountNo}/status",
        "description": "更新账户业务状态（如暂停/恢复分账能力）"
      }
    ],
    "database_tables": [
      {
        "name": "wallet_account",
        "description": "存储天财专用账户的业务层信息"
      },
      {
        "name": "wallet_relationship",
        "description": "存储分账关系绑定记录"
      },
      {
        "name": "wallet_withdraw_card",
        "description": "存储天财接收方账户绑定的提现银行卡"
      },
      {
        "name": "wallet_transfer_order",
        "description": "存储分账转账指令记录"
      }
    ],
    "dependencies": [
      "账户系统",
      "三代系统",
      "清结算系统",
      "计费中台",
      "对账单系统",
      "业务核心系统"
    ],
    "key_features": [
      "账户信息同步与维护",
      "分账关系绑定处理",
      "分账转账处理（归集/批量付款/会员结算）",
      "天财接收方账户管理"
    ]
  },
  {
    "module_name": "对账单系统",
    "purpose": "为天财分账业务生成准确、完整、可追溯的资金交易明细汇总，支持商户、运营及财务人员进行资金核对与账务管理。",
    "interfaces": [
      {
        "method": "POST",
        "path": "/api/v1/statement/generate",
        "description": "触发生成指定类型和周期的对账单"
      },
      {
        "method": "GET",
        "path": "/api/v1/statement/download/{statementId}",
        "description": "下载已生成的对账单文件"
      },
      {
        "method": "GET",
        "path": "/api/v1/statement/query",
        "description": "查询对账单生成记录及状态"
      },
      {
        "method": "POST",
        "path": "/api/v1/statement/reconcile",
        "description": "发起对账任务，比对内部交易记录与外部渠道数据"
      },
      {
        "method": "GET",
        "path": "/api/v1/statement/reconcile/task/{taskId}",
        "description": "查询对账任务结果"
      }
    ],
    "database_tables": [
      {
        "name": "statement_metadata",
        "description": "对账单元数据表，记录账单生成任务"
      },
      {
        "name": "statement_detail",
        "description": "对账单明细数据表，存储构成账单的每笔交易记录"
      },
      {
        "name": "reconciliation_task",
        "description": "对账任务记录表"
      },
      {
        "name": "reconciliation_result",
        "description": "对账结果明细表"
      }
    ],
    "dependencies": [
      "行业钱包系统",
      "账户系统",
      "业务核心系统",
      "文件存储服务",
      "消息队列"
    ],
    "key_features": [
      "交易明细采集与存储",
      "多类型对账单生成",
      "内部与外部数据对账"
    ]
  }
]